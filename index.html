<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Neon Blaster: Infinity Siege</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">

<style>
body {
  margin:0;
  background:#111;
  color:white;
  text-align:center;
  font-family:Arial;
  overflow:hidden;
}
canvas {
  background:#222;
  display:none;
  margin:auto;
}
button,input {
  padding:10px;
  margin:5px;
  font-size:16px;
}

/* MOBILE CONTROLS */
#mobileControls {
  display:none;
  position:fixed;
  bottom:10px;
  width:100%;
  pointer-events:none;
}
#joystick {
  width:120px;
  height:120px;
  border-radius:50%;
  background:rgba(255,255,255,0.1);
  position:absolute;
  left:20px;
  bottom:0;
  pointer-events:auto;
}
#stick {
  width:50px;
  height:50px;
  background:rgba(0,255,255,0.8);
  border-radius:50%;
  position:absolute;
  left:35px;
  top:35px;
}
#shootBtn {
  width:90px;
  height:90px;
  border-radius:50%;
  background:red;
  color:white;
  font-size:18px;
  position:absolute;
  right:30px;
  bottom:10px;
  pointer-events:auto;
}
</style>
</head>

<body>
<h2>ðŸŽ® Neon Blaster: Infinity Siege</h2>

<div id="menu">
  <button onclick="startGame()">Start Game</button>
</div>

<canvas id="game" width="800" height="450"></canvas>
<div id="hud"></div>

<!-- MOBILE CONTROLS -->
<div id="mobileControls">
  <div id="joystick">
    <div id="stick"></div>
  </div>
  <button id="shootBtn">SHOOT</button>
</div>

<script>
/* ===== SETUP ===== */
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

let STATE="MENU";
let player, enemies=[], bullets=[];
let level=1, wave=1, lives=5;

let keys={}, mouse={x:400,y:200};
let joystick={x:0,y:0,active:false};

/* ===== START ===== */
function startGame(){
  STATE="PLAY";
  player={x:400,y:350,r:15,speed:4};
  enemies=[]; bullets=[];
  spawnWave();
  menu.style.display="none";
  canvas.style.display="block";
  mobileControls.style.display="block";
}

/* ===== ENEMIES ===== */
function spawnWave(){
  enemies=[];
  let count = 4 + wave;
  let hp = 2 + Math.floor((level - 1) / 5);

  for(let i=0;i<count;i++){
    enemies.push({
      x:Math.random()*700+50,
      y:Math.random()*200+50,
      r:18,
      vx:2,
      vy:2,
      hp:hp
    });
  }
}

/* ===== INPUT ===== */
document.addEventListener("keydown",e=>keys[e.key]=true);
document.addEventListener("keyup",e=>keys[e.key]=false);

/* MOUSE AIM */
canvas.addEventListener("mousemove",e=>{
  let r=canvas.getBoundingClientRect();
  mouse.x=e.clientX-r.left;
  mouse.y=e.clientY-r.top;
});
canvas.addEventListener("mousedown",()=>shoot(mouse.x,mouse.y));

/* TOUCH AIM */
canvas.addEventListener("touchstart",e=>{
  let r=canvas.getBoundingClientRect();
  let t=e.touches[0];
  shoot(t.clientX-r.left, t.clientY-r.top);
});

/* SHOOT BUTTON */
shootBtn.addEventListener("click",()=>shoot(mouse.x,mouse.y));

function shoot(tx,ty){
  let a=Math.atan2(ty-player.y, tx-player.x);
  bullets.push({
    x:player.x,
    y:player.y,
    vx:Math.cos(a)*7,
    vy:Math.sin(a)*7
  });
}

/* ===== JOYSTICK ===== */
joystickEl=document.getElementById("joystick");
stick=document.getElementById("stick");

joystickEl.addEventListener("touchstart",()=>joystick.active=true);
joystickEl.addEventListener("touchmove",e=>{
  let t=e.touches[0];
  let r=joystickEl.getBoundingClientRect();
  joystick.x=(t.clientX-r.left-60)/40;
  joystick.y=(t.clientY-r.top-60)/40;
});
joystickEl.addEventListener("touchend",()=>{
  joystick.active=false;
  joystick.x=joystick.y=0;
  stick.style.left="35px";
  stick.style.top="35px";
});

/* ===== LOOP ===== */
function update(){
  let dx=0, dy=0;
  if(keys.w||keys.ArrowUp) dy--;
  if(keys.s||keys.ArrowDown) dy++;
  if(keys.a||keys.ArrowLeft) dx--;
  if(keys.d||keys.ArrowRight) dx++;

  if(joystick.active){
    dx+=joystick.x;
    dy+=joystick.y;
    stick.style.left=35+joystick.x*30+"px";
    stick.style.top=35+joystick.y*30+"px";
  }

  player.x+=dx*player.speed;
  player.y+=dy*player.speed;

  enemies.forEach(e=>{
    e.x+=e.vx; e.y+=e.vy;
    if(e.x<e.r||e.x>800-e.r)e.vx*=-1;
    if(e.y<e.r||e.y>450-e.r)e.vy*=-1;
  });

  bullets.forEach(b=>{b.x+=b.vx; b.y+=b.vy;});

  bullets=bullets.filter(b=>{
    for(let e of enemies){
      if(Math.hypot(b.x-e.x,b.y-e.y)<e.r){
        e.hp--; return false;
      }
    }
    return true;
  });

  enemies=enemies.filter(e=>{
    if(e.hp<=0) return false;
    if(Math.hypot(player.x-e.x,player.y-e.y)<player.r+e.r){
      lives--;
      if(lives<=0){ alert("GAME OVER"); location.reload(); }
    }
    return true;
  });

  if(enemies.length===0){
    wave++;
    if(wave>3){ wave=1; level++; }
    spawnWave();
  }
}

function draw(){
  ctx.clearRect(0,0,800,450);

  ctx.fillStyle="cyan";
  ctx.beginPath();
  ctx.arc(player.x,player.y,player.r,0,Math.PI*2);
  ctx.fill();

  enemies.forEach(e=>{
    ctx.fillStyle="red";
    ctx.beginPath();
    ctx.arc(e.x,e.y,e.r,0,Math.PI*2);
    ctx.fill();
  });

  ctx.fillStyle="yellow";
  bullets.forEach(b=>ctx.fillRect(b.x,b.y,4,4));

  hud.innerText=`Level ${level} | Wave ${wave}/3 | Lives ${lives}`;
}

function loop(){
  if(STATE==="PLAY"){ update(); draw(); }
  requestAnimationFrame(loop);
}
loop();
</script>
</body>
</html>




