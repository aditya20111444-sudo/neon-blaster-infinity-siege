<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Neon Blaster: Infinity Siege</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">

<style>
body {
  margin:0;
  background:#111;
  color:white;
  text-align:center;
  font-family:Arial;
  overflow:hidden;
}
canvas {
  background:#222;
  display:none;
  margin:auto;
}
button,input {
  padding:10px;
  margin:5px;
  font-size:16px;
}

/* MOBILE CONTROLS */
#mobileControls {
  display:none;
  position:fixed;
  bottom:10px;
  width:100%;
  pointer-events:none;
}
#joystick {
  width:120px;
  height:120px;
  border-radius:50%;
  background:rgba(255,255,255,0.1);
  position:absolute;
  left:20px;
  bottom:0;
  pointer-events:auto;
}
#stick {
  width:50px;
  height:50px;
  background:rgba(0,255,255,0.8);
  border-radius:50%;
  position:absolute;
  left:35px;
  top:35px;
}
#shootBtn {
  width:90px;
  height:90px;
  border-radius:50%;
  background:red;
  color:white;
  font-size:18px;
  position:absolute;
  right:30px;
  bottom:10px;
  pointer-events:auto;
}
</style>
</head>

<body>
<h2>ðŸŽ® Neon Blaster: Infinity Siege</h2>

<div id="loginScreen">
  <input id="username" placeholder="Username"><br>
  <input id="password" type="password" placeholder="Password"><br>
  <button onclick="login()">Login</button>
</div>

<div id="menu" style="display:none;">
  <button onclick="startGame('story')">Story Mode</button>
  <button onclick="startGame('infinite')">Infinity Mode</button>
</div>

<canvas id="game" width="800" height="450"></canvas>
<div id="hud"></div>

<!-- MOBILE CONTROLS -->
<div id="mobileControls">
  <div id="joystick">
    <div id="stick"></div>
  </div>
  <button id="shootBtn">SHOOT</button>
</div>

<script>
/* ===== BASIC LOGIN (SIMPLE) ===== */
function login(){
  loginScreen.style.display="none";
  menu.style.display="block";
}

/* ===== GAME SETUP ===== */
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

let STATE="MENU", mode="";
let player, enemies=[], bullets=[];
let level=1, wave=1, lives=5;

let keys={};
let joystick={x:0,y:0,active:false};

/* ===== START GAME ===== */
function startGame(m){
  mode=m;
  STATE="PLAY";
  level=1; wave=1; lives=5;
  player={x:400,y:350,r:15,speed:4};
  enemies=[]; bullets=[];
  spawnWave();
  menu.style.display="none";
  canvas.style.display="block";
  mobileControls.style.display="block";
}

/* ===== ENEMY WAVES ===== */
function spawnWave(){
  enemies=[];
  let count = 4 + wave;

  for(let i=0;i<count;i++){
    let hp = 2 + Math.floor((level - 1) / 5); // ðŸ”¥ FIXED HP SYSTEM
    enemies.push({
      x:Math.random()*700+50,
      y:Math.random()*200+50,
      r:18,
      vx:2+level*0.2,
      vy:2+level*0.2,
      hp:hp
    });
  }
}

/* ===== INPUT ===== */
document.addEventListener("keydown",e=>keys[e.key]=true);
document.addEventListener("keyup",e=>keys[e.key]=false);

canvas.addEventListener("click",shoot);
shootBtn.addEventListener("click",shoot);

function shoot(){
  bullets.push({
    x:player.x,
    y:player.y,
    vx:0,
    vy:-7
  });
}

/* ===== JOYSTICK ===== */
const joy = document.getElementById("joystick");
const stick = document.getElementById("stick");

joy.addEventListener("touchstart",e=>joystick.active=true);
joy.addEventListener("touchmove",e=>{
  let t=e.touches[0];
  let r=joy.getBoundingClientRect();
  joystick.x=(t.clientX-r.left-60)/40;
  joystick.y=(t.clientY-r.top-60)/40;
});
joy.addEventListener("touchend",()=>{
  joystick.active=false;
  joystick.x=joystick.y=0;
  stick.style.left="35px";
  stick.style.top="35px";
});

/* ===== GAME LOOP ===== */
function update(){
  let dx=0, dy=0;

  if(keys.w||keys.ArrowUp) dy--;
  if(keys.s||keys.ArrowDown) dy++;
  if(keys.a||keys.ArrowLeft) dx--;
  if(keys.d||keys.ArrowRight) dx++;

  if(joystick.active){
    dx+=joystick.x;
    dy+=joystick.y;
    stick.style.left=35+joystick.x*30+"px";
    stick.style.top=35+joystick.y*30+"px";
  }

  player.x+=dx*player.speed;
  player.y+=dy*player.speed;

  enemies.forEach(e=>{
    e.x+=e.vx; e.y+=e.vy;
    if(e.x<e.r||e.x>800-e.r)e.vx*=-1;
    if(e.y<e.r||e.y>450-e.r)e.vy*=-1;
  });

  bullets.forEach(b=>b.y+=b.vy);

  bullets=bullets.filter(b=>{
    for(let e of enemies){
      if(Math.hypot(b.x-e.x,b.y-e.y)<e.r){
        e.hp--; return false;
      }
    }
    return b.y>0;
  });

  enemies=enemies.filter(e=>{
    if(e.hp<=0) return false;
    if(Math.hypot(player.x-e.x,player.y-e.y)<player.r+e.r){
      lives--;
      if(lives<=0){
        alert("GAME OVER");
        location.reload();
      }
    }
    return true;
  });

  if(enemies.length===0){
    wave++;
    if(wave>3){ wave=1; level++; }
    spawnWave();
  }
}

function draw(){
  ctx.clearRect(0,0,800,450);

  ctx.fillStyle="cyan";
  ctx.beginPath();
  ctx.arc(player.x,player.y,player.r,0,Math.PI*2);
  ctx.fill();

  enemies.forEach(e=>{
    ctx.fillStyle="red";
    ctx.beginPath();
    ctx.arc(e.x,e.y,e.r,0,Math.PI*2);
    ctx.fill();
  });

  ctx.fillStyle="yellow";
  bullets.forEach(b=>ctx.fillRect(b.x,b.y,4,8));

  hud.innerText=`Level ${level} | Wave ${wave}/3 | Lives ${lives}`;
}

function loop(){
  if(STATE==="PLAY"){
    update();
    draw();
  }
  requestAnimationFrame(loop);
}
loop();
</script>
</body>
</html>



